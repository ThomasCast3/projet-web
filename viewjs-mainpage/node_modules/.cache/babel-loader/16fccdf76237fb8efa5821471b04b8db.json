{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5a3661fc\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  id: \"TrajetContainer\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"mapContainer\"\n}, null, -1\n/* HOISTED */\n));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_CreerTrajet = _resolveComponent(\"CreerTrajet\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_CreerTrajet, {\n    onCreerMarker: _cache[0] || (_cache[0] = $event => $options.ajoutMarker($event))\n  }), _hoisted_2]);\n}","map":{"version":3,"mappings":";;;;;AACMA,IAAE,EAAC;;;gEAGPC,oBAEM,KAFN,EAEM;AAFDD,IAAE,EAAC;AAEF,CAFN,EAAsB,IAAtB,EAAsB;AAAA;AAAtB;;;;;uBAHDE,oBAMQ,KANR,cAMQ,CALRC,aAAmDC,sBAAnD,EAAmD;AAApCC,iBAAY,sCAAEC,qBAAYC,MAAZ,CAAF;AAAwB,GAAnD,CAKQ,EAHPC,UAGO,CANR","names":["id","_createElementVNode","_createElementBlock","_createVNode","_component_CreerTrajet","onCreerMarker","$options","$event","_hoisted_2"],"sourceRoot":"","sources":["/Users/thomas/Documents/GitHub/projet-web/viewjs-mainpage/src/assets/components/MapTrajet.vue"],"sourcesContent":["<template>\n <div id=\"TrajetContainer\" >\n <CreerTrajet  @creer-Marker=\"ajoutMarker($event)\"/>\n\n  <div id=\"mapContainer\" >\n\n  </div>\n   </div>\n</template>\n\n<script>\nimport \"/public/leaflet.css\";\nimport { Icon } from 'leaflet';\nimport L from \"leaflet\";\nimport \"/public/Tween.js\";\nimport \"/public/leaflet.curve.js\";\nimport CreerTrajet from \"/src/assets/components/CreerTrajet.vue\";\n\ndelete Icon.Default.prototype._getIconUrl;\nIcon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nexport default {\n  name: \"LeafletMap\",\n  components: {\n       CreerTrajet,\n  },\n  data() {\n    return {\n      map: null,\n    };\n  },\n  mounted() {\n    this.map = L.map(\"mapContainer\").setView([46.05, 11.05], 5);\n    L.tileLayer(\"https://{s}.tile.osm.org/{z}/{x}/{y}.png\", {\n      attribution:\n        '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this.map);\n    //use a mix of renderers\n    var customPane = this.map.createPane(\"customPane\");\n    var canvasRenderer = L.canvas({ pane: \"customPane\" });\n    customPane.style.zIndex = 399; // put just behind the standard overlay pane which is at 400\n   \n  },\n  onBeforeUnmount() {\n    if (this.map) {\n      this.map.remove();\n    }\n  },\n\n  methods:{\n      ajoutMarker(ville){\n         for(let x=0; x<2;x++){\n          var CPvillePos = \"\";\n          var CPvilleDest =\"\";\n            fetch(\n        `https://geo.api.gouv.fr/communes?nom=${ville[x]}&fields=code,nom,centre`\n      ).then((response) =>\n        response.json().then((data) => {\n            for(let nomVille of data){\n                let nameV = nomVille.nom;\n                if(ville[0] === nameV){\n                console.log(nameV)\n                }\n               \n            }\n           var lng = data[0].centre.coordinates[0];\n           var lat =data[0].centre.coordinates[1];\n            L.marker([lat,lng]).addTo(this.map);\n            })\n            );\n          }\n        },\n  },\n}\n</script>\n\n<style scoped>\n#mapContainer {\n  width: 50vw;\n  height: 50vh;\n}\n\n#TrajetContainer {\n    \n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    align-items:center;\n    justify-content: space-between;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}